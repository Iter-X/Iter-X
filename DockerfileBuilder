FROM golang:1.24.1

RUN apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 648ACFD622F3D138 \
    && echo "deb https://deb.debian.org/debian bookworm main" > /etc/apt/sources.list \
    && echo "deb https://deb.debian.org/debian bookworm-updates main" >> /etc/apt/sources.list \
    && echo "deb https://deb.debian.org/debian-security bookworm-security main" >> /etc/apt/sources.list

RUN apt-get update -y \
    && apt-get install -y protobuf-compiler

WORKDIR .

# copy当前目录的Makefile
COPY Makefile Makefile

RUN make init
